#!perl

@probas = (
	[],
        [4, 0, 0, 0, 0, 0, 2],
        [16, 16, 0, 0, 0, 0, 4],
        [60, 48, 96, 0, 0, 0, 12],
        [204, 180, 384, 480, 0, 0, 48],
        [600, 840, 1704, 2400, 2040, 0, 192],
        [1080, 3768, 8448, 11952, 10440, 7200, 3768],
);

@scores = (
	[],
        [0, 0, 0, 0, 0, 0, 150],
        [0, 1200, 0, 0, 0, 0, 600],
        [0, 7200, 7200, 0, 0, 0, 4050],
        [0, 60300, 57600, 36000, 0, 0, 22950],
        [0, 405000, 567000, 360000, 153000, 0, 108000],
        [0, 2151000, 4152600, 3942000, 1566000, 540000, 3904500],
);

for (0..20) {
print "$_: ";

my @strategy = (0, 500, 500 + 50 * $_, 500, 1100, 5000, 5000);
my $score;

for (1..1E6) {
	my $d = 6;
	my $s = 0;
	while ($s < $strategy[$d]) {
		my $r = rand 6**$d;
		my $nd = -1;
		$r -= $probas[$d][++$nd] while $r >= 0;
		$s += $scores[$d][$nd] / $probas[$d][$nd];
		$d = $nd;
	}
	$score += $d && $s;
}

print $score / 1E6, "\n";

}